<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sleecloud</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Loading Screen :) -->
  <div id="loading-screen">
    <div class="loading-bar-container">
      <div class="loading-bar" id="loading-bar"></div>
      <div class="loading-message">Sit back and relax, made by Arpan.M</div>
    </div>
  </div>

  <!-- Star icon to open music menu, come on check this out :)-->
  
  <button id="menu-icon" aria-label="Open music menu">‚≠ê</button>

  <!-- Cloud * Watermark * Controls * Me ;)-->
  <div class="cloud" id="cloud"></div>
  <div class="watermark">Arpan Murmu</div>

  <div class="controls">
    <button class="switch" id="switch">Start Rain</button>
    <button class="colorful-button" id="colorful-button">Colorful Rain</button>
  </div>

  <!-- Music Menu Overlay -->
  <div id="overlay" aria-hidden="true">
    <div id="music-box" role="dialog" aria-modal="true" aria-labelledby="music-title">
      <button id="close-btn" aria-label="Close">‚úñ</button>
      <h3 id="music-title">Choose a Song</h3>

    <div id="song-notice">
  üíå Want your favorite song here? DM me!
</div>

<!-- song 1 -->

      <button class="song-option" data-src="subwoofer-lullaby.mp3">Subwoofer Lullaby ‚Äî C418</button>

<!-- song 2-->

      <button class="song-option" data-src="sweden.mp3">Sweden ‚Äî C418</button>

<!-- song 3-->

<button class="song-option" data-src="relaxed.mp3">Relaxed ‚Äî by krishna.B</button>


      <audio id="player" controls></audio>
    </div>
  </div>

  <script src="script.js" defer></script>
</body>
<script>
// ===== Wind Effect, Now this will cost my life :/ ====
const windCanvas = document.createElement("canvas");
windCanvas.id = "windCanvas";
document.body.appendChild(windCanvas);

const wctx = windCanvas.getContext("2d");
windCanvas.style.position = "fixed";
windCanvas.style.top = "0";
windCanvas.style.left = "0";
windCanvas.style.pointerEvents = "none";
windCanvas.style.zIndex = "5"; 
resizeWind();

window.addEventListener("resize", resizeWind);
function resizeWind() {
  windCanvas.width = window.innerWidth;
  windCanvas.height = window.innerHeight;
}

class WindArrow {
  constructor() {
    this.reset();
  }
  reset() {
    this.x = Math.random() * windCanvas.width;
    this.y = Math.random() * windCanvas.height;
    this.speed = 0.5 + Math.random() * 1.5; // wind speed
    this.dir = Math.random() > 0.5 ? 1 : -1; // > or <
    this.size = 14;
  }
  update() {
    this.x += this.speed * this.dir;
    if (this.x > windCanvas.width + 20 || this.x < -20) {
      this.reset();
      this.y = Math.random() * windCanvas.height;
      this.dir = Math.random() > 0.5 ? 1 : -1;
    }
  }
  draw() {
    wctx.fillStyle = "rgba(255,255,255,0.4)";
    wctx.font = `${this.size}px monospace`;
    wctx.fillText(this.dir === 1 ? ">" : "<", this.x, this.y);
  }
}

let arrows = Array.from({ length: 40 }, () => new WindArrow());

function animateWind() {
  wctx.clearRect(0, 0, windCanvas.width, windCanvas.height);
  arrows.forEach(a => {
    a.update();
    a.draw();
  });
  requestAnimationFrame(animateWind);
}
animateWind();

// Light Trail Effect | Fuck this system
const trailCanvas = document.createElement("canvas");
trailCanvas.id = "trailCanvas";
document.body.appendChild(trailCanvas);
// Nightmare :#
const tctx = trailCanvas.getContext("2d");
trailCanvas.style.position = "fixed";
trailCanvas.style.top = "0";
trailCanvas.style.left = "0";
trailCanvas.style.pointerEvents = "none";
trailCanvas.style.zIndex = "10";
resizeTrail();

window.addEventListener("resize", resizeTrail);
function resizeTrail() {
  trailCanvas.width = window.innerWidth;
  trailCanvas.height = window.innerHeight;
}

let trails = [];

document.addEventListener("mousemove", e => createTrail(e.x, e.y));
document.addEventListener("touchmove", e => {
  let touch = e.touches[0];
  createTrail(touch.clientX, touch.clientY);
});

function createTrail(x, y) {
  trails.push({ x, y, alpha: 1, radius: 6 });
}

function animateTrails() {
  tctx.clearRect(0, 0, trailCanvas.width, trailCanvas.height);
  trails.forEach((p, i) => {
    tctx.beginPath();
    tctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
    tctx.fillStyle = `rgba(0, 200, 255, ${p.alpha})`;
    tctx.fill();
    p.alpha -= 0.02;
    p.radius += 0.5;
    if (p.alpha <= 0) trails.splice(i, 1);
  });
  requestAnimationFrame(animateTrails);
}
animateTrails();
</script>
</html>